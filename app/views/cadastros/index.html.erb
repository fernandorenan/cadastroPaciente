<div class="notif-container">
  <div class="accordion accordion-flush" id="birthNotif">
    <div class="accordion-item">
      <h2 class="accordion-header" id="headingOne">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
          Notificações:
        </button>
      </h2>
      <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#birthNotif">
        <div class="accordion-body">
          <%=birthday_notification%> 
        </div>
      </div>
    </div>
  </div>
</div>
<hr>
<div class="row align-items-start">
  <div class='col-10'>
  <%= form_with url: cadastros_url, method: :get do |form| %>
    <%= form.label :name, "Buscar por nome:" %>
    <%= form.text_field :name, value: params[:name], onfocus: "this.value='';"%>
      |
    <%= form.label :status, "Buscar por status:" %>
    <%= form.select :status, nil ,:prompt => "Status" do %>
      <% ["Inativo", "Ativo"].each_with_index do |value, index| %>
        <%= content_tag(:option, value , value: index) %>
      <% end %>
    <% end %>
    <%= form.button%>
  <% end %>
  </div>
  <div class='col-2'>
   <%= link_to "Gerar Pdf", cadastros_path(format: :pdf), target: "_blank" %>
  </div>

  <div class='col-2'>
   <%= label_tag :cep, "Buscar por CEP:" %>
   <%= text_field_tag( :cep, value: params[:cep])%>
   <%= button_tag%>
  </div>

</div>
<hr>
<div id="cadastros">
<% if @cadastros.size > 0 %>
  <table class='table'>
    <thead>
      <tr>
      <th>Nome</th>
      <th>Telefone</th>
      <th>Email</th>
      <th>Nascimento</th>
      <th>Objetivo</th>
      <th>Status</th>
      <th>&nbsp</th>
    </thead>
    <tbody>
      <% @cadastros.each do |cadastro| %>
        <tr>
          <td><%= cadastro.name %></td>
          <td><%= cadastro.phone %></td>
          <td><%= cadastro.email %></td>
          <td><%= cadastro.birth&.strftime("%d/%m/%Y") %></td>
          <td><%= cadastro.goal %></td>
          <td><%= cadastro.status? ? "Ativo" : "Inativo" %></td>
          <td><%= link_to "Visualizar", cadastro %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <% else %>
    <h3>Você não possui usuários cadastrados. </h3>
  <% end %>
</div>

<%= link_to "Novo cadastro", new_cadastro_path %>
